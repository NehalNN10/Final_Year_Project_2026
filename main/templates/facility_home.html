<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

    <title>HU Digital Twin - Facilities Dashboard</title>

  </head>
<body>

<body>
  <div class="main-nav">
    <div style="flex: 1;">
      <h1>HU Digital Twin </h1>
    </div>
    <div style="flex: 2;"> 
      <div style="display: flex; flex-direction: row; justify-content: space-evenly">
        <button class="header selected" onclick="window.location.href='/facility_home'">Home</button>
        <button class="header" onclick="window.location.href='/model'">Model</button>
        <button class="header" onclick="window.location.href='/'">Log Out</button>
      </div>
    </div>
  </div>

  <div class="header2">
    <span>Facilities Dashboard</span>
  </div>

  <div class="main-home scroll" style="max-height: calc(100vh - 10rem); overflow-y: auto;">
    <div class="row" style="width: 100%; align-items: normal !important; margin-top: 0px; overflow-y: hidden;">
      <div class="tracker-ui scroll" style="flex: 1; margin: 0 20px 0 0; height: 67.5vh !important; overflow-y: auto;">
        <div class="row" style="margin-top: 0px !important">
          <h2>AC Alert</h2>
        </div>
        <div id="ac-alerts">
          <div class="tracker-ui">
            <div class="row" style="margin-top: 0px !important;">
              <div style="flex: 3;">
                <div class="row" style="margin-top: 0px !important;">
                  <h4>Soorty Lecture Hall - E-121</h4>
                </div>
                <div class="row">
                  <div class="row" style="flex: 2; margin-top: 0px;">
                    <span>Vacant</span>
                    <span>On</span>
                    <span>23 °C</span>
                  </div>
                  <div style="flex: 1;"></div>
                </div>
              </div>
              <div style="flex: 1; text-align: right;">
                <span style="color: red; font-weight: bold;">37 mins</span>
              </div>
            </div>
          </div>

          <div class="tracker-ui">
            <div class="row" style="margin-top: 0px !important;">
              <div style="flex: 3;">
                <div class="row" style="margin-top: 0px !important;">
                  <h4>Horizon Room 07 - H-507</h4>
                </div>
                <div class="row">
                  <div class="row" style="flex: 2; margin-top: 0px;">
                    <span>Vacant</span>
                    <span>On</span>
                    <span>23 °C</span>
                  </div>
                  <div style="flex: 1;"></div>
                </div>
              </div>
              <div style="flex: 1; text-align: right;">
                <span style="color: red; font-weight: bold;">45 mins</span>
              </div>
            </div>
          </div>

          <div class="tracker-ui">
            <div class="row" style="margin-top: 0px !important;">
              <div style="flex: 3;">
                <div class="row" style="margin-top: 0px !important;">
                  <h4>Arif Habib Classroom - C-109</h4>
                </div>
                <div class="row">
                  <div class="row" style="flex: 2; margin-top: 0px;">
                    <span>Vacant</span>
                    <span>On</span>
                    <span>23 °C</span>
                  </div>
                  <div style="flex: 1;"></div>
                </div>
              </div>
              <div style="flex: 1; text-align: right;">
                <span style="color: red; font-weight: bold;">1 hr 45 mins</span>
              </div>
            </div>
          </div>

          <div class="tracker-ui">
            <div class="row" style="margin-top: 0px !important;">
              <div style="flex: 3;">
                <div class="row" style="margin-top: 0px !important;">
                  <h4>Linux Lab - E-003</h4>
                </div>
                <div class="row">
                  <div class="row" style="flex: 2; margin-top: 0px;">
                    <span>Vacant</span>
                    <span>On</span>
                    <span>23 °C</span>
                  </div>
                  <div style="flex: 1;"></div>
                </div>
              </div>
              <div style="flex: 1; text-align: right;">
                <span style="color: red; font-weight: bold;">22 mins</span>
              </div>
            </div>
          </div>

          <div class="tracker-ui">
            <div class="row" style="margin-top: 0px !important;">
              <div style="flex: 3;">
                <div class="row" style="margin-top: 0px !important;">
                  <h4>W-243</h4>
                </div>
                <div class="row">
                  <div class="row" style="flex: 2; margin-top: 0px;">
                    <span>Vacant</span>
                    <span>On</span>
                    <span>23 °C</span>
                  </div>
                  <div style="flex: 1;"></div>
                </div>
              </div>
              <div style="flex: 1; text-align: right;">
                <span style="color: red; font-weight: bold;">1 min</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="tracker-ui scroll" style="flex: 1; margin: 0 20px 0 0; height: 67.5vh !important; overflow-y: auto;">
        <div class="row" style="margin-top: 0px !important">
          <h2>Lights Alert</h2>
        </div>
        <div id="ac-alerts">
          <div class="tracker-ui">
            <div class="row" style="margin-top: 0px !important;">
              <div style="flex: 3;">
                <div class="row" style="margin-top: 0px !important;">
                  <h4>Soorty Lecture Hall - E-121</h4>
                </div>
                <div class="row">
                  <div class="row" style="flex: 2; margin-top: 0px;">
                    <span>Vacant</span>
                    <span>On</span>
                    <span>23 °C</span>
                  </div>
                  <div style="flex: 1;"></div>
                </div>
              </div>
              <div style="flex: 1; text-align: right;">
                <span>Status: <span style="color: red; font-weight: bold;">AC Off</span></span>
              </div>
            </div>
          </div>

          <div class="tracker-ui">
            <div class="row" style="margin-top: 0px !important;">
              <div style="flex: 3;">
                <div class="row" style="margin-top: 0px !important;">
                  <h4>Soorty Lecture Hall - E-121</h4>
                </div>
                <div class="row">
                  <div class="row" style="flex: 2; margin-top: 0px;">
                    <span>Vacant</span>
                    <span>On</span>
                    <span>23 °C</span>
                  </div>
                  <div style="flex: 1;"></div>
                </div>
              </div>
              <div style="flex: 1; text-align: right;">
                <span>Status: <span style="color: red; font-weight: bold;">AC Off</span></span>
              </div>
            </div>
          </div>

          <div class="tracker-ui">
            <div class="row" style="margin-top: 0px !important;">
              <div style="flex: 3;">
                <div class="row" style="margin-top: 0px !important;">
                  <h4>Soorty Lecture Hall - E-121</h4>
                </div>
                <div class="row">
                  <div class="row" style="flex: 2; margin-top: 0px;">
                    <span>Vacant</span>
                    <span>On</span>
                    <span>23 °C</span>
                  </div>
                  <div style="flex: 1;"></div>
                </div>
              </div>
              <div style="flex: 1; text-align: right;">
                <span>Status: <span style="color: red; font-weight: bold;">AC Off</span></span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="tracker-ui scroll" style="flex: 1; margin: 0px; height: 67.5vh !important; overflow-y: auto;">
        <div class="row" style="margin-top: 0px !important;">
          <h2>Temperature Alert</h2>
        </div>
        <div id="ac-alerts">
          <div class="tracker-ui">
            <div class="row" style="margin-top: 0px !important;">
              <div style="flex: 3;">
                <div class="row" style="margin-top: 0px !important;">
                  <h4>Soorty Lecture Hall - E-121</h4>
                </div>
                <div class="row">
                  <div class="row" style="flex: 2; margin-top: 0px;">
                    <span>Vacant</span>
                    <span>On</span>
                    <span>23 °C</span>
                  </div>
                  <div style="flex: 1;"></div>
                </div>
              </div>
              <div style="flex: 1; text-align: right;">
                <span>Status: <span style="color: red; font-weight: bold;">AC Off</span></span>
              </div>
            </div>
          </div>

          <div class="tracker-ui">
            <div class="row" style="margin-top: 0px !important;">
              <div style="flex: 3;">
                <div class="row" style="margin-top: 0px !important;">
                  <h4>Soorty Lecture Hall - E-121</h4>
                </div>
                <div class="row">
                  <div class="row" style="flex: 2; margin-top: 0px;">
                    <span>Vacant</span>
                    <span>On</span>
                    <span>23 °C</span>
                  </div>
                  <div style="flex: 1;"></div>
                </div>
              </div>
              <div style="flex: 1; text-align: right;">
                <span>Status: <span style="color: red; font-weight: bold;">AC Off</span></span>
              </div>
            </div>
          </div>

          <div class="tracker-ui">
            <div class="row" style="margin-top: 0px !important;">
              <div style="flex: 3;">
                <div class="row" style="margin-top: 0px !important;">
                  <h4>Soorty Lecture Hall - E-121</h4>
                </div>
                <div class="row">
                  <div class="row" style="flex: 2; margin-top: 0px;">
                    <span>Vacant</span>
                    <span>On</span>
                    <span>23 °C</span>
                  </div>
                  <div style="flex: 1;"></div>
                </div>
              </div>
              <div style="flex: 1; text-align: right;">
                <span>Status: <span style="color: red; font-weight: bold;">AC Off</span></span>
              </div>
            </div>
          </div>

          <div class="tracker-ui">
            <div class="row" style="margin-top: 0px !important;">
              <div style="flex: 3;">
                <div class="row" style="margin-top: 0px !important;">
                  <h4>Soorty Lecture Hall - E-121</h4>
                </div>
                <div class="row">
                  <div class="row" style="flex: 2; margin-top: 0px;">
                    <span>Vacant</span>
                    <span>On</span>
                    <span>23 °C</span>
                  </div>
                  <div style="flex: 1;"></div>
                </div>
              </div>
              <div style="flex: 1; text-align: right;">
                <span>Status: <span style="color: red; font-weight: bold;">AC Off</span></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="tracker-ui scroll" style="flex: 1; margin-top: 20px; margin-bottom: 40px; max-height: 67.5vh; overflow-y: auto;">
      <div class="row" style="margin-top: 0px !important">
        <h2>Rooms Real-Time Data</h2>
        <h2> ⏰ <span id="time"></span></h2>
      </div>
    
      <table class="scroll" style="width: 100%; margin-top: 10px; border-collapse: collapse; ">
        <tr>
          <th style="width: 8%;">Room ID</th>
          <th style="width: 40%">Room Name</th>
          <th style="width: 13%">Occupancy</th>
          <th style="width: 13%">Temperature</th>
          <th style="width: 13%">AC Status</th>
          <th style="width: 13%">Light Status</th>
        </tr>
        <tr>
          <td>C-007</td>
          <td>Projects Lab</td>
          <td><span class='fill' id="occ">??</span></td>
          <td><span class='fill' id="temp">??</span></td>
          <td><span class='fill' id="ac">??</span></td>
          <td><span class='fill' id="lights">??</span></td>
        </tr>

        {% for room in rooms %}
        <tr>
          <td>{{ room.id }}</td>
          <td>{{ room.name }}</td>
          <td>{{ room.temperature }}</td>
          <td>{{ room.humidity }}</td>
          <td>{{ room.occupancy }}</td>
        </tr>
        {% endfor %}
      </table>
      <ul>
        {% for facility in facilities %}
          <li>
            <strong>{{ facility.name }}</strong> - {{ facility.location }}
            <button onclick="window.location.href='/model?facility_id={{ facility.id }}'">View Model</button>
          </li>
        {% endfor %}
      </ul>
    </div>
  </div>

    <script type="module" src="{{ url_for('static', filename='facility_home.js') }}"></script>
</body>
</html>